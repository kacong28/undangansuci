<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Playfair Display for headings, Montserrat for body -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif; /* Default body font */
            background-color: #f8f8f8; /* Light gray background */
            color: #333; /* Dark gray text */
        }
        h1, h2, h3 {
            font-family: 'Playfair Display', serif; /* Headings font */
        }
        .container {
            max-width: 900px;
        }
        .section-title {
            font-weight: 600;
            color: #4a4a4a;
        }
        .btn-primary {
            background-color: #a78bfa; /* Soft purple */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Fully rounded */
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #8b5cf6; /* Darker purple on hover */
        }
        .card {
            background-color: white;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); /* Subtle shadow */
            padding: 2rem;
        }
        input[type="text"],
        input[type="email"],
        textarea,
        select {
            border: 1px solid #e0e0e0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: border-color 0.3s ease;
        }
        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #a78bfa; /* Soft purple focus */
        }
        /* Custom message box styles */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            z-index: 1000;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            text-align: center;
            max-width: 90%;
        }
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none; /* Hidden by default */
        }
        .image-placeholder {
            width: 100%;
            height: auto; /* Changed from fixed height */
            max-height: 300px; /* Max height to maintain layout */
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 1.2rem;
            text-align: center;
            border-radius: 0.5rem;
            overflow: hidden; /* Ensure image fits */
            cursor: pointer; /* Indicate clickable */
        }
        .image-placeholder img {
            width: 100%;
            height: auto; /* Let height adjust based on aspect ratio */
            object-fit: contain; /* Changed from cover to contain */
        }
        /* Floating navigation buttons */
        .floating-nav {
            position: fixed;
            bottom: 2rem;
            left: 2rem; /* Position on the left */
            right: 2rem; /* Position on the right */
            display: flex;
            flex-direction: row; /* Buttons side-by-side */
            justify-content: space-between; /* Space them out */
            gap: 1rem; /* Gap between them if needed */
            z-index: 900; /* Below message box, above content */
        }
        .nav-btn {
            background-color: #8b5cf6; /* Darker purple */
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 9999px; /* Fully rounded */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .nav-btn:hover {
            background-color: #a78bfa; /* Lighter purple on hover */
            transform: translateY(-2px);
        }
        /* Mobile specific styling for nav buttons */
        @media (max-width: 767px) { /* Up to small screens, adjust as needed with Tailwind breakpoints */
            .nav-btn .text-content {
                display: none; /* Hide text on mobile */
            }
            .nav-btn {
                padding: 0.75rem; /* Smaller padding for just arrows */
                width: 45px; /* Fixed width for circular look if desired */
                height: 45px; /* Fixed height for circular look if desired */
                border-radius: 50%; /* Make them circular */
            }
        }
        /* Style for map link button */
        .map-link-btn {
            display: inline-flex; /* Use flex to align icon and text */
            align-items: center;
            gap: 0.5rem; /* Space between icon and text */
            color: #4a4a4a; /* Darker text for contrast */
            border: 1px solid #d1d5db; /* Light gray border */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem; /* Slightly rounded corners */
            text-decoration: none;
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }
        .map-link-btn:hover {
            background-color: #f3f4f6; /* Light gray background on hover */
            border-color: #9ca3af; /* Darker border on hover */
            color: #1f2937; /* Darker text on hover */
        }
        .map-link-btn svg {
            width: 1.25rem; /* Icon size */
            height: 1.25rem; /* Icon size */
            fill: currentColor; /* Inherit color from parent */
        }

        /* Gallery Modal Styles */
        .gallery-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001; /* Higher than message box */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .gallery-modal.show {
            opacity: 1;
            visibility: visible;
        }
        .gallery-modal-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gallery-modal-content img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Ensure entire image is visible */
            border-radius: 0.5rem;
        }
        .gallery-nav-btn, .gallery-close-btn {
            position: absolute;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 9999px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1; /* Remove extra line height for icon */
        }
        .gallery-nav-btn:hover, .gallery-close-btn:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        .gallery-nav-btn.prev {
            left: 1rem;
        }
        .gallery-nav-btn.next {
            right: 1rem;
        }
        .gallery-close-btn {
            top: 1rem;
            right: 1rem;
            font-size: 1.2rem;
            padding: 0.5rem 0.8rem;
            border-radius: 50%;
        }

        /* Music Player Styles */
        .music-player {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 950; /* Above nav buttons, below modals */
            background-color: rgba(139, 92, 246, 0.8); /* Darker purple with transparency */
            border-radius: 9999px;
            padding: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .music-player button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }
        .music-player button:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="antialiased leading-normal">

    <!-- Message Box Element -->
    <div id="messageBoxOverlay" class="message-box-overlay"></div>
    <div id="messageBox" class="message-box">
        <h3 id="messageBoxTitle" class="text-2xl font-bold mb-4 text-gray-800"></h3>
        <p id="messageBoxContent" class="text-gray-600 mb-6"></p>
        <button id="messageBoxClose" class="btn-primary">Tutup</button>
    </div>

    <!-- Gallery Modal -->
    <div id="galleryModal" class="gallery-modal">
        <div class="gallery-modal-content">
            <img id="galleryImage" src="" alt="Gallery Image">
            <button id="galleryPrevBtn" class="gallery-nav-btn prev">&larr;</button>
            <button id="galleryNextBtn" class="gallery-nav-btn next">&rarr;</button>
            <button id="galleryCloseBtn" class="gallery-close-btn">X</button>
        </div>
    </div>

    <!-- Music Player -->
    <div class="music-player">
        <audio id="backgroundMusic" loop>
            <!-- Ganti URL ini dengan link MP3 Anda -->
            <source src="https://github.com/kacong28/undangansuci/blob/main/img/urlINSTRUMEN CINTA TERAKHIR.mp3?raw=true" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <button id="playPauseBtn">
            <!-- Play icon -->
            <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block;">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
            </svg>
            <!-- Pause icon -->
            <svg id="pauseIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: none;">
                <path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
        </button>
    </div>


    <!-- Hero Section -->
    <section id="hero" class="relative h-screen flex items-center justify-center text-center">
        <!-- Menggunakan nama file yang diunggah langsung ke platform -->
        <img src="https://github.com/kacong28/undangansuci/blob/main/img/suci1-Picsart-AiImageEnhancer.jpg?raw=true" alt="Foto Mempelai Suci dan Izam" class="absolute inset-0 w-full h-full object-cover object-top z-0" onerror="this.onerror=null;this.src='https://github.com/kacong28/undangansuci/blob/main/img/suci1-Picsart-AiImageEnhancer.jpg?raw=true';"/>

        <div class="absolute inset-0 bg-black opacity-40 rounded-xl z-10"></div>
        
        <!-- Main Text Content for Hero Section (shifted up on mobile portrait, centered on mobile landscape/desktop) -->
        <div class="relative z-20 text-white p-6 rounded-xl bg-opacity-70 -translate-y-48 sm:translate-y-0">
            <h4 class="text-xl md:text-2xl font-medium mb-2">Dengan Hormat Mengundang Anda ke</h4>
            <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">Pernikahan</h1>
            <h2 class="text-5xl md:text-7xl font-bold mb-6 italic">Suci & Izam</h2>
            <p class="text-lg md:text-xl font-light">Minggu, 27 Juli 2025</p>
            <!-- "Lihat Detail" button for DESKTOP/larger screens, hidden on smaller screens -->
            <a href="#details" class="btn-primary mt-8 inline-block hidden sm:inline-block">Lihat Detail</a>
        </div>

        <!-- "Lihat Detail" button for MOBILE PORTRAIT, positioned at the bottom -->
        <a href="#details" class="btn-primary absolute bottom-10 left-1/2 -translate-x-1/2 z-30 sm:hidden">Lihat Detail</a>
    </section>

    <!-- Details Section -->
    <section id="details" class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl section-title text-center mb-12">Detail Acara</h2>
            <div class="grid md:grid-cols-2 gap-8 md:gap-12">
                <!-- Akad Nikah -->
                <div class="card text-center">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">Akad Nikah</h3>
                    <p class="text-lg mb-2 text-gray-600">Minggu, 27 Juli 2025</p>
                    <p class="text-lg mb-4 text-gray-600">Pukul: 07.00 WIB</p>
                    <p class="text-md text-gray-500">Bertempat di:</p>
                    <p class="text-md text-gray-500">Rumah Bpk. Salim</p>
                    <p class="text-md text-gray-500">RT/RW 02/03 Kecamatan Pohjentrek Pasuruan</p>
                    <p class="text-md text-gray-500">Dusun Jalan Desa Tidu</p>
                    <a href="https://maps.app.goo.gl/8EGonr7kv1KVYGnq6" target="_blank" class="map-link-btn mt-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                        Lihat di Google Maps
                    </a>
                </div>
                <!-- Resepsi / Ngunduh Mantu -->
                <div class="card text-center">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">Resepsi Pernikahan / Ngunduh Mantu</h3>
                    <p class="text-lg mb-2 text-gray-600">Minggu, 27 Juli 2025</p>
                    <p class="text-lg mb-4 text-gray-600">Pukul: 18.00 - Selesai WIB</p>
                    <p class="text-md text-gray-500">Bertempat di:</p>
                    <p class="text-md text-gray-500">Dusun Jelan Desa Tidu</p>
                    <p class="text-md text-gray-500">RT/RW 02/03 Kecamatan Pohjentrek Pasuruan</p>
                    <p class="text-md text-gray-500">Hiburan: Sound Sistem</p>
                    <a href="https://maps.app.goo.gl/8EGonr7kv1KVYGnq6" target="_blank" class="map-link-btn mt-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                        Lihat di Google Maps
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Couple Photos Section -->
    <section id="couple-photos" class="py-16 md:py-24 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl section-title text-center mb-12">Foto Mempelai</h2>
            <div class="grid md:grid-cols-2 gap-8 md:gap-12">
                <div class="card">
                    <div class="image-placeholder gallery-item" data-src="https://github.com/kacong28/undangansuci/blob/main/img/img001.jpg?raw=true">
                        <img src="https://github.com/kacong28/undangansuci/blob/main/img/img001.jpg?raw=true" alt="Momen Berdua" onerror="this.onerror=null;this.src='https://placehold.co/600x400/a78bfa/ffffff?text=Error+Loading+Image';" />
                    </div>
                    <p class="text-center text-gray-600 mt-4">Momen Berdua</p>
                </div>
                <div class="card">
                    <div class="image-placeholder gallery-item" data-src="https://github.com/kacong28/undangansuci/blob/main/img/suci2-Picsart-AiImageEnhancer.jpg?raw=true">
                        <img src="https://github.com/kacong28/undangansuci/blob/main/img/suci2-Picsart-AiImageEnhancer.jpg?raw=true" alt="Kisah Cinta Kami" onerror="this.onerror=null;this.src='https://placehold.co/600x400/8b5cf6/ffffff?text=Error+Loading+Image';" />
                    </div>
                    <p class="text-center text-gray-600 mt-4">Kisah Cinta Kami</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Decoration Section -->
    <section id="decoration-photos" class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl section-title text-center mb-12">Dekorasi & Suasana</h2>
            <div class="grid md:grid-cols-3 gap-8 md:gap-12">
                <div class="card">
                    <div class="image-placeholder gallery-item" data-src="https://github.com/kacong28/undangansuci/blob/main/img/suci3-Picsart-AiImageEnhancer.jpg?raw=true">
                        <img src="https://github.com/kacong28/undangansuci/blob/main/img/suci3-Picsart-AiImageEnhancer.jpg?raw=true" alt="Dekorasi Area Resepsi" onerror="this.onerror=null;this.src='https://placehold.co/400x300/dcdcdc/333?text=Error+Loading+Image';" />
                    </div>
                    <p class="text-center text-gray-600 mt-4">Suasana Resepsi</p>
                </div>
                <div class="card">
                    <div class="image-placeholder gallery-item" data-src="https://github.com/kacong28/undangansuci/blob/main/img/img002.jpg?raw=true">
                        <img src="https://github.com/kacong28/undangansuci/blob/main/img/img002.jpg?raw=true" alt="Dekorasi Meja Tamu" onerror="this.onerror=null;this.src='https://placehold.co/400x300/c0c0c0/333?text=Error+Loading+Image';" />
                    </div>
                    <p class="text-center text-gray-600 mt-4">Detail Meja</p>
                </div>
                <div class="card">
                    <div class="image-placeholder gallery-item" data-src="https://github.com/kacong28/undangansuci/blob/main/img/suci2-Picsart-AiImageEnhancer.jpg?raw=true">
                        <img src="https://github.com/kacong28/undangansuci/blob/main/img/suci2-Picsart-AiImageEnhancer.jpg?raw=true" alt="Dekorasi Panggung Pelaminan" onerror="this.onerror=null;this.src='https://placehold.co/400x300/a0a0a0/333?text=Error+Loading+Image';" />
                    </div>
                    <p class="text-center text-gray-600 mt-4">Pelaminan Impian</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Our Story Section -->
    <section id="our-story" class="py-16 md:py-24 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl section-title text-center mb-12">Mempelai & Keluarga</h2>
            <div class="card max-w-2xl mx-auto text-center">
                <h3 class="text-2xl font-semibold mb-4 text-gray-700">Wulan Suci Romadhon</h3>
                <p class="text-lg text-gray-600 mb-6">Putri Bapak Salim & Ibu Husnul Khotimah</p>

                <h3 class="text-2xl font-semibold mb-4 text-gray-700">Multazam</h3>
                <p class="text-lg text-gray-600 mb-6">Putra Bapak Nahrowi & Ibu Alm. Khoiriyah</p>

                <p class="text-md text-gray-700 leading-relaxed mb-4">
                    Dengan menyebut nama Allah SWT, kami berdua, Wulan Suci Romadhon dan Multazam, dengan segala kerendahan hati mengundang Bapak/Ibu/Saudara/i sekalian untuk hadir dan memberikan doa restu pada pernikahan kami.
                </p>
                <p class="text-md text-gray-700 leading-relaxed">
                    Setiap kisah cinta cinta memiliki awal yang unik, dan kami bersyukur atas perjalanan yang telah kami lalui bersama. Kami siap melangkah ke babak baru dalam hidup ini, membangun keluarga yang sakinah, mawaddah, warahmah.
                </p>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section id="rsvp" class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl section-title text-center mb-12">Konfirmasi Kehadiran</h2>
            <div class="card max-w-xl mx-auto">
                <p class="text-center text-gray-600 mb-6">Mohon konfirmasi kehadiran Anda sebelum 20 Juli 2025.</p>
                <div class="space-y-6">
                    <div>
                        <label for="rsvp-name" class="block text-gray-700 text-sm font-semibold mb-2">Nama Lengkap Anda</label>
                        <input type="text" id="rsvp-name" name="name" placeholder="Nama Anda" class="w-full">
                    </div>
                    <div>
                        <label for="rsvp-guests" class="block text-gray-700 text-sm font-semibold mb-2">Jumlah Tamu yang Hadir (Termasuk Anda)</label>
                        <select id="rsvp-guests" name="guests" class="w-full">
                            <option value="">Pilih Jumlah</option>
                            <option value="1">1 Orang</option>
                            <option value="2">2 Orang</option>
                            <option value="3">3 Orang</option>
                            <option value="4">4 Orang</option>
                            <option value="5">5+ Orang</option>
                        </select>
                    </div>
                    <div>
                        <label for="rsvp-attendance" class="block text-gray-700 text-sm font-semibold mb-2">Apakah Anda Akan Hadir?</label>
                        <select id="rsvp-attendance" name="attendance" class="w-full">
                            <option value="">Pilih</option>
                            <option value="yes">Ya, Saya Akan Hadir</option>
                            <option value="no">Maaf, Tidak Bisa Hadir</option>
                        </select>
                    </div>
                    <div>
                        <label for="rsvp-message" class="block text-gray-700 text-sm font-semibold mb-2">Pesan & Doa (Opsional)</label>
                        <textarea id="rsvp-message" name="message" rows="4" placeholder="Kirimkan pesan dan doa terbaik Anda..." class="w-full"></textarea>
                    </div>
                    <button id="submitRsvp" class="btn-primary w-full">Kirim Konfirmasi</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 text-center rounded-t-xl>
        <div class="container mx-auto px-4">
            <p class="text-lg font-light mb-4">Terima Kasih Atas Doa dan Restu Anda</p>
            <p class="text-sm font-thin">&copy; 2025 Wulan Suci Romadhon & Multazam. Hak Cipta Dilindungi.</p>
        </div>
    </footer>

    <!-- Floating Navigation Buttons -->
    <div class="floating-nav">
        <a href="#hero" id="navPrevBtn" class="nav-btn">
            &larr; <span class="text-content md:inline">Sebelumnya</span>
        </a>
        <a href="#details" id="navNextBtn" class="nav-btn">
            <span class="text-content md:inline">Berikutnya</span> &rarr;
        </a>
    </div>

    <script>
        // Custom Message Box Function
        function showMessageBox(title, message) {
            const messageBox = document.getElementById('messageBox');
            const messageBoxOverlay = document.getElementById('messageBoxOverlay');
            document.getElementById('messageBoxTitle').innerText = title;
            document.getElementById('messageBoxContent').innerText = message;
            messageBox.style.display = 'flex';
            messageBoxOverlay.style.display = 'block';
        }

        document.getElementById('messageBoxClose').addEventListener('click', function() {
            document.getElementById('messageBox').style.display = 'none';
            document.getElementById('messageBoxOverlay').style.display = 'none';
        });

        document.getElementById('submitRsvp').addEventListener('click', function() {
            const name = document.getElementById('rsvp-name').value;
            const guests = document.getElementById('rsvp-guests').value;
            const attendance = document.getElementById('rsvp-attendance').value;
            const message = document.getElementById('rsvp-message').value;

            if (!name || !guests || !attendance) {
                showMessageBox('Data Tidak Lengkap', 'Mohon lengkapi semua kolom wajib (Nama, Jumlah Tamu, dan Kehadiran) sebelum mengirim.');
                return;
            }

            // In a real application, you would send this data to a server.
            // For this example, we'll just show a success message.
            console.log('RSVP Data:', { name, guests, attendance, message });
            showMessageBox('Konfirmasi Terkirim!', 'Terima kasih atas konfirmasi kehadiran Anda. Kami menantikan kehadiran Anda di hari bahagia kami!');

            // Clear the form after submission
            document.getElementById('rsvp-name').value = '';
            document.getElementById('rsvp-guests').value = '';
            document.getElementById('rsvp-attendance').value = '';
            document.getElementById('rsvp-message').value = '';
        });

        // Gallery functionality
        const galleryModal = document.getElementById('galleryModal');
        const galleryImage = document.getElementById('galleryImage');
        const galleryPrevBtn = document.getElementById('galleryPrevBtn');
        const galleryNextBtn = document.getElementById('galleryNextBtn');
        const galleryCloseBtn = document.getElementById('galleryCloseBtn');
        const galleryItems = document.querySelectorAll('.gallery-item');
        let currentImageIndex = 0;
        const allGalleryImages = []; // Array to store all image URLs for navigation

        // Populate allGalleryImages from existing gallery items
        galleryItems.forEach(item => {
            const imgElement = item.querySelector('img');
            if (imgElement && imgElement.src) {
                allGalleryImages.push(imgElement.src);
            } else if (item.dataset.src) { // Fallback to data-src if img.src is missing
                 allGalleryImages.push(item.dataset.src);
            }
        });

        function openGallery(index) {
            currentImageIndex = index;
            showImage(currentImageIndex);
            galleryModal.classList.add('show');
            document.body.style.overflow = 'hidden'; // Prevent scrolling body when modal is open
        }

        function closeGallery() {
            galleryModal.classList.remove('show');
            document.body.style.overflow = ''; // Restore body scrolling
        }

        function showImage(index) {
            if (index < 0) {
                currentImageIndex = allGalleryImages.length - 1;
            } else if (index >= allGalleryImages.length) {
                currentImageIndex = 0;
            }
            galleryImage.src = allGalleryImages[currentImageIndex];
        }

        function nextImage() {
            currentImageIndex++;
            showImage(currentImageIndex);
        }

        function prevImage() {
            currentImageIndex--;
            showImage(currentImageIndex);
        }

        // Add event listeners for gallery items
        galleryItems.forEach((item, index) => {
            item.addEventListener('click', () => openGallery(index));
        });

        // Add event listeners for gallery modal buttons
        galleryCloseBtn.addEventListener('click', closeGallery);
        galleryPrevBtn.addEventListener('click', prevImage);
        galleryNextBtn.addEventListener('click', nextImage);

        // Close modal when clicking outside the image content
        galleryModal.addEventListener('click', (e) => {
            if (e.target === galleryModal) {
                closeGallery();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && galleryModal.classList.contains('show')) {
                closeGallery();
            }
        });


        // Get all sections with IDs to create dynamic navigation
        const sections = ['hero', 'details', 'couple-photos', 'decoration-photos', 'our-story', 'rsvp'];
        let currentSectionNavIndex = 0; // Renamed to avoid conflict with gallery index

        function updateNavButtons() {
            const prevBtn = document.getElementById('navPrevBtn');
            const nextBtn = document.getElementById('navNextBtn');

            // Find the currently visible section
            const visibleSection = sections.find((id, index) => {
                const section = document.getElementById(id);
                if (section) {
                    const rect = section.getBoundingClientRect();
                    // Consider a section visible if its top is within 50% of the viewport and it's mostly on screen
                    return rect.top >= 0 && rect.top <= window.innerHeight / 2 && rect.bottom > 0;
                }
                return false;
            });

            if (visibleSection) {
                currentSectionNavIndex = sections.indexOf(visibleSection);
            } else {
                // Fallback: if no section is fully visible, use scroll position
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                let closestSectionIndex = 0;
                let minDistance = Infinity;

                sections.forEach((id, index) => {
                    const section = document.getElementById(id);
                    if (section) {
                        const distance = Math.abs(section.offsetTop - scrollTop);
                        if (distance < minDistance) {
                            minDistance = distance;
                            closestSectionIndex = index;
                        }
                    }
                });
                currentSectionNavIndex = closestSectionIndex;
            }

            // If on the hero section, hide both floating navigation buttons
            if (currentSectionNavIndex === 0) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            } else {
                // Otherwise, show/hide floating navigation buttons based on position
                if (currentSectionNavIndex > 0) {
                    prevBtn.href = '#' + sections[currentSectionNavIndex - 1];
                    prevBtn.style.display = 'flex';
                } else {
                    prevBtn.style.display = 'none'; // Hide if at the first section
                }

                if (currentSectionNavIndex < sections.length - 1) {
                    nextBtn.href = '#' + sections[currentSectionNavIndex + 1];
                    nextBtn.style.display = 'flex';
                } else {
                    nextBtn.style.display = 'none'; // Hide if at the last section
                }
            }
        }

        // Smooth scrolling for all internal navigation links (including floating buttons)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') { // Handle top of page navigation
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    document.querySelector(targetId).scrollIntoView({
                        behavior: 'smooth'
                    });
                }
                // Small delay to ensure scroll happens before updating button visibility
                setTimeout(updateNavButtons, 600);
            });
        });

        // Update buttons on scroll and load
        window.addEventListener('scroll', updateNavButtons);
        window.addEventListener('load', updateNavButtons);

        // Music Play/Pause functionality
        const backgroundMusic = document.getElementById('backgroundMusic');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');

        // Function to attempt playing music
        function tryPlayMusic() {
            backgroundMusic.play()
                .then(() => {
                    // Autoplay started successfully
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                })
                .catch(error => {
                    // Autoplay failed (e.g., due to browser policy)
                    console.log('Autoplay was prevented by the browser. User must interact to play music.', error);
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    // Show a message to the user that music can be played by clicking the button
                    showMessageBox('Musik Latar Belakang', 'Browser Anda mungkin memblokir pemutaran otomatis. Silakan klik ikon musik di kanan atas untuk memutar atau menghentikan.');
                });
        }

        // Try to play music on load (will likely be blocked by browsers, but good for attempting)
        window.addEventListener('load', tryPlayMusic);

        // Toggle play/pause on button click
        playPauseBtn.addEventListener('click', () => {
            if (backgroundMusic.paused) {
                backgroundMusic.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                backgroundMusic.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        });

        // Update icon if music ends or is manually paused by browser/system
        backgroundMusic.addEventListener('pause', () => {
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
        });

        backgroundMusic.addEventListener('play', () => {
            playIcon.style.display = 'none';
            pauseIcon.style.display = 'block';
        });

    </script>
</body>
</html>
